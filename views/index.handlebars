<div class="row">
    <div class="col-md-12">
        <h1>Welcome to the Burger Lounge!</h1>
        <h2>Create your own or devour an existing burger creation!</h2>
    </div>
</div>

<div class="row">
    <div class="col-md-6">
        <h2>Available Burgers!</h2>
        <ul>
            {{#each burgers}}
            {{#unless devoured}}
            <li>{{burger_name}}
                <button class="devour" data-id="{{id}}" data-devoured="true">
                    Devour It!
                </button>
            </li>
            {{/unless}}
            {{/each}}
        </ul>
    </div>

    <div class="col-md-6">
        <h2>Burgers that have been devoured!</h2>

        <ul>
            {{#each burgers}}
            {{#if devoured}}
            <li>
                {{burger_name}}
            </li>
            {{/if}}
            {{/each}}
        </ul>
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <h2>Create Your Own Burger</h2>
        <form class="create-form">

            <div class="form-group">
                <label for="burger">Burger Name:</label>
                <input type="text" id="burger" name="name">
            </div>

            <button type="submit">Add Burger</button>
        </form>
    </div>
</div>

<script>
    $(function () {
        $(".devour").on("click", function (event) {
            var id = $(this).data("id");
            var eaten = $(this).data("devoured");

            var newEatenState = {
                devoured: eaten
            };

            // Send the PUT request.
            $.ajax("/api/burgers/" + id, {
                type: "PUT",
                data: newEatenState
            }).then(
                function () {
                    // Reload the page
                    location.reload();
                }
            );
        });

        $(".create-form").on("submit", function (event) {
            event.preventDefault();

            var newBurger = {
                burger_name: $("#burger").val().trim(),
            };

            // Send the POST request.
            $.ajax("/api/burgers", {
                type: "POST",
                data: newBurger
            }).then(
                function () {
                    // Reload the page
                    location.reload();
                }
            );
        });
    });
</script>